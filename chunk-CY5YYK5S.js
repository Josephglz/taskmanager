import{$ as W,A as m,B as v,C as B,D as l,E as P,F as N,G as p,H,K as R,L as T,M as $,S as z,W as J,X as g,Y as K,Z as Q,_ as U,aa as X,ba as Y,c as L,ca as Z,da as ee,e as V,ea as te,f as q,g as c,h as F,i as D,j as b,m as a,ma as x,n as d,q as _,r as k,s as h,t as G,u as O,v as A,w as n,x as i,y as s,z as I}from"./chunk-J6ELHI6R.js";var S=class o{constructor(t,e){this._authService=t;this._router=e}logout(){this._authService.logout(),this._router.navigate(["/login"])}static \u0275fac=function(e){return new(e||o)(d(te),d(z))};static \u0275cmp=c({type:o,selectors:[["app-navbar"]],standalone:!0,features:[p],decls:5,vars:0,consts:[[1,"bg-sky-700","text-white","w-full","flex","items-center","justify-between","px-4","py-4"],[1,"text-4xl","font-bold"],[1,"text-xl",3,"click"],[1,"fa-solid","fa-right-from-bracket"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"h1",1),l(2,"Gestor de tareas"),i(),n(3,"button",2),m("click",function(){return r.logout()}),s(4,"i",3),i()())},encapsulation:2})};var y=class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=c({type:o,selectors:[["app-card-skeleton"]],standalone:!0,features:[p],decls:1,vars:0,consts:[[1,"h-56","w-full","bg-gray-300","rounded-lg","animate-pulse"]],template:function(e,r){e&1&&s(0,"div",0)},encapsulation:2})};var f=class o{constructor(t){this._http=t}getTasks(){return this._http.get("/api/tasks")}deleteTask(t){return this._http.delete(`/api/tasks/${t}`)}createTask(t){return this._http.post("/api/tasks",t)}static \u0275fac=function(e){return new(e||o)(q($))};static \u0275prov=V({token:o,factory:o.\u0275fac,providedIn:"root"})};var w=class o{constructor(t,e){this._taskService=t;this._toastr=e}task={};onTaskDeleted=new b;deleteTask(){this._taskService.deleteTask(this.task.id).subscribe({next:()=>{this._toastr.warning("Tarea eliminada correctamente."),this.onTaskDeleted.emit()},error:t=>{this._toastr.error("Ocurri\xF3 un error al eliminar la tarea.")}})}static \u0275fac=function(e){return new(e||o)(d(f),d(x))};static \u0275cmp=c({type:o,selectors:[["app-card"]],inputs:{task:"task"},outputs:{onTaskDeleted:"onTaskDeleted"},standalone:!0,features:[p],decls:9,vars:3,consts:[[1,"h-56","bg-white","p-4","rounded-lg","shadow-md","flex","flex-col","space-y-2","w-full"],[1,"font-bold","text-xl","truncate","cursor-default",3,"title"],[1,"h-32","line-clamp-6"],[1,"text-slate-600","break-all"],[1,"flex","justify-end","items-center"],[1,"text-white","bg-red-400","hover:bg-red-500","p-2","rounded-md","cursor-pointer","flex","items-center","justify-center",3,"click"],[1,"fa-solid","fa-trash"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"p",1),l(2),i(),n(3,"div",2)(4,"p",3),l(5),i()(),n(6,"div",4)(7,"button",5),m("click",function(){return r.deleteTask()}),s(8,"i",6),i()()()),e&2&&(a(),B("title",r.task.title),a(),N(" ",r.task.title," "),a(3),N(" ",r.task.description," "))},encapsulation:2})};var oe=o=>({"border-red-400":o});function ae(o,t){if(o&1&&(n(0,"p",13),l(1),i()),o&2){let e=v();a(),P(e.errorMessage)}}var E=class o{constructor(t,e,r){this._formBuilder=t;this._taskService=e;this._toastService=r;this._cardForm=this._formBuilder.group({title:["",[g.required,g.minLength(3),g.maxLength(120)]],description:["",[g.required,g.minLength(3),g.maxLength(255)]]})}onHideModal=new b;_cardForm={};errorMessage=null;getTaskForm(){return{title:this._cardForm.get("title")?.value,description:this._cardForm.get("description")?.value}}hasError(t,e){let r=this._cardForm.get(t);return r?.hasError(e)&&(r?.dirty||r?.touched)}getErrorMessage(t){let e=this._cardForm.controls[t];return e?.hasError("required")?"Este campo es obligatorio.":e?.hasError("maxlength")?`Este campo debe tener menos de ${e.errors?.maxlength.requiredLength} car\xE1cteres.`:e?.hasError("minlength")?"Este campo debe tener al menos 3 caracteres.":""}onSubmit(){return L(this,null,function*(){if(this._cardForm.invalid){this._cardForm.markAllAsTouched(),this.errorMessage="Los datos ingresados no son v\xE1lidos, por favor intente nuevamente.";return}let t=this._cardForm.value;this.errorMessage=null,this._taskService.createTask(t).subscribe({next:()=>{this._toastService.success("Tarea creada correctamente"),this.hideModal(1)},error:e=>{this.errorMessage="Ocurri\xF3 un error al intentar guardar la tarea, por favor intente nuevamente."}})})}hideModal(t){this.onHideModal.emit(t)}static \u0275fac=function(e){return new(e||o)(d(Z),d(f),d(x))};static \u0275cmp=c({type:o,selectors:[["app-card-modal"]],outputs:{onHideModal:"onHideModal"},standalone:!0,features:[p],decls:23,vars:8,consts:[[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"bg-white","rounded-lg","shadow-lg","p-6","w-11/12","sm:w-3/4","md:w-1/2","lg:w-1/3"],[1,"flex","justify-between","items-center","border-b","pb-2"],[1,"text-xl","font-bold"],[1,"text-gray-500","hover:text-gray-700",3,"click"],[1,"fa-solid","fa-times"],[1,"mt-4"],[3,"ngSubmit","formGroup"],[1,"mb-4"],["for","title",1,"block","font-semibold","mb-2"],["id","title","name","title","formControlName","title","type","text","placeholder","Ingrese el t\xEDtulo de la nota.","required","",1,"w-full","border","rounded-lg","p-2",3,"ngClass"],["for","description",1,"block","font-semibold","mb-2"],["id","description","name","description","formControlName","description","rows","4","placeholder","Ingrese la descripci\xF3n","required","",1,"w-full","border","rounded-lg","p-2",3,"ngClass"],[1,"text-red-500","text-sm"],[1,"flex","justify-end","gap-4"],["type","button",1,"px-4","py-2","bg-gray-300","hover:bg-gray-400","rounded-lg",3,"click"],["type","submit",1,"px-4","py-2","bg-green-600","hover:bg-green-500","text-white","rounded-lg"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),l(4,"Crear Nota"),i(),n(5,"button",4),m("click",function(){return r.hideModal(0)}),s(6,"i",5),i()(),n(7,"div",6)(8,"form",7),m("ngSubmit",function(){return r.onSubmit()}),n(9,"div",8)(10,"label",9),l(11,"T\xEDtulo"),i(),s(12,"input",10),i(),n(13,"div",8)(14,"label",11),l(15,"Descripci\xF3n"),i(),s(16,"textarea",12),i(),_(17,ae,2,1,"p",13),n(18,"div",14)(19,"button",15),m("click",function(){return r.hideModal(0)}),l(20," Cancelar "),i(),n(21,"button",16),l(22," Guardar "),i()()()()()()),e&2&&(a(8),k("formGroup",r._cardForm),a(4),k("ngClass",H(4,oe,r.hasError("title","required"))),a(4),k("ngClass",H(6,oe,r.hasError("description","required"))),a(),h(r.errorMessage?17:-1))},dependencies:[ee,U,J,K,Q,Y,W,X,T,R],encapsulation:2})};function se(o,t){if(o&1){let e=I();n(0,"app-card",6),m("onTaskDeleted",function(){F(e);let u=v(3);return D(u.onTaskDeleted())}),i()}if(o&2){let e=t.$implicit;k("task",e)}}function le(o,t){if(o&1&&(n(0,"div",1),O(1,se,1,1,"app-card",5,G),i()),o&2){let e=v(2);a(),A(e.taskList)}}function de(o,t){o&1&&(n(0,"p",4),l(1,"No se ha encontrado ninguna tarea, pruebe creando una."),i())}function me(o,t){if(o&1&&_(0,le,3,0,"div",1)(1,de,2,0,"p",4),o&2){let e=v();h(e.taskList.length?0:1)}}function ce(o,t){o&1&&(n(0,"div",1),s(1,"app-card-skeleton",7)(2,"app-card-skeleton",7)(3,"app-card-skeleton",7),i())}function pe(o,t){if(o&1){let e=I();n(0,"app-card-modal",8),m("onHideModal",function(u){F(e);let ie=v();return D(ie.onModalClosed(u))}),i()}}var re=class o{constructor(t){this._taskService=t}taskList=[];loading=!0;showModal=!1;ngOnInit(){this.loadTasks()}loadTasks(){this.loading=!0,this.taskList=[],this._taskService.getTasks().subscribe({next:t=>{this.taskList=t,this.loading=!1},error:t=>{console.error(t),this.loading=!1}})}onTaskDeleted(){this.loadTasks()}toggleModal(){this.showModal=!this.showModal}onModalClosed(t){this.toggleModal(),t===1&&this.loadTasks()}static \u0275fac=function(e){return new(e||o)(d(f))};static \u0275cmp=c({type:o,selectors:[["app-home"]],standalone:!0,features:[p],decls:7,vars:2,consts:[[1,"p-4","w-full","h-full"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","xl:grid-cols-5","gap-4"],[1,"fixed","bottom-4","right-4","text-2xl","text-white","bg-green-400","hover:bg-green-500","p-4","rounded-full","cursor-pointer","flex","items-center","justify-center",3,"click"],[1,"fa-solid","fa-plus"],[1,"text-slate-600"],[3,"task"],[3,"onTaskDeleted","task"],[1,"w-full"],[3,"onHideModal"]],template:function(e,r){e&1&&(s(0,"app-navbar"),n(1,"div",0),_(2,me,2,1)(3,ce,4,0,"div",1),i(),n(4,"button",2),m("click",function(){return r.toggleModal()}),s(5,"i",3),i(),_(6,pe,1,0,"app-card-modal")),e&2&&(a(2),h(r.loading?3:2),a(4),h(r.showModal?6:-1))},dependencies:[T,S,y,w,E],encapsulation:2})};export{re as HomeComponent};
